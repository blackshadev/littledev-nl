<template>
    <div class="c-main-navigation">
        <nav class="container">
            <nuxt-link class="-main" to="/" active-class="-active"
                >Littledev</nuxt-link
            >
            <ul class="c-main-navigation__items">
                <li>
                    <nuxt-link to="/about" active-class="-active"
                        >About</nuxt-link
                    >
                </li>
                <li>
                    <nuxt-link to="/blog" active-class="-active"
                        >Blog</nuxt-link
                    >
                </li>
                <li>
                    <nuxt-link to="/projects" active-class="-active"
                        >Projects</nuxt-link
                    >
                </li>
                <li>
                    <a href="https://github.com/blackshadev/" title="My Github">
                        <font-awesome-icon :icon="['fab', 'github']" />
                    </a>
                </li>
                <li>
                    <button @click="toggleDarkMode">
                        <font-awesome-icon :icon="['fas', toggleIcon]" />
                    </button>
                </li>
            </ul>
        </nav>
    </div>
</template>

<script lang="ts">
import Vue from 'vue'
export default Vue.extend({
    data() {
        return {
            isDark: false,
        }
    },
    computed: {
        toggleIcon() {
            return this.$data.isDark ? 'moon' : 'sun'
        },
    },
    watch: {
        isDark(val) {
            document.documentElement.classList.toggle('dark', val)
            localStorage.setItem('theme', val ? 'dark' : 'light')
        },
    },
    beforeMount() {
        this.isDark =
            localStorage.getItem('theme') === 'dark' ||
            window.matchMedia('(prefers-color-scheme: dark)').matches
    },
    methods: {
        toggleDarkMode() {
            this.isDark = !this.isDark
        },
    },
})
</script>

<style lang="scss" scoped>
.c-main-navigation {
    @apply bg-nav dark:bg-dark-nav;
    @apply py-3;

    a,
    li svg {
        @apply text-white no-underline;
    }

    nav {
        @apply mx-auto;
        @apply flex justify-between flex-wrap;
    }

    .-main {
        @apply mx-3;
        @apply text-xl font-fancy;
    }

    &__items {
        @apply flex;

        li {
            @apply px-3;

            .-active {
                @apply underline;
            }
        }
    }
}
</style>
